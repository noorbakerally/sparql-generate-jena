<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7 at 2016-03-03 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160303" />
    <meta http-equiv="Content-Language" content="en" />
    <title>SPARQL Generate over Apache Jena &#x2013; SPARQL-Generate-Jena</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/thesmartenergy/sparql-generate-jena">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://itea3.org/project/seas.html" id="bannerLeft">
                                                                                        <img src="http://the-smart-energy.com/content/themes/xxi/img/logo.png"  alt="ITEA 12004 SEAS Project"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-03-03
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>Introduction</a>
          </li>
                
      <li>
  
                          <a href="examples.html" title="Examples">
          <span class="none"></span>
        Examples</a>
            </li>
                
      <li>
  
                          <a href="http://ci.emse.fr/sparql-generate/" class="externalLink" title="Specification">
          <span class="none"></span>
        Specification</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                          
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="http://github.com/thesmartenergy/sparql-generate-jena" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://cse.google.com/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>SPARQL-Generate-Jena</h1>
<p>SPARQL-Generate implementation over Apache Jena.</p>
<div class="section">
<h2><a name="Available_in_version_0.1:"></a>Available in version 0.1:</h2>
<p>Don&#x2019;t try the example above in preliminary version 0.1.</p>
<p>Preliminary version 0.1 implements: - keywords <tt>GENERATE</tt> and <tt>SELECTOR</tt>. - there may be only one <tt>SELECTOR</tt> clause, used as follows: <tt>SELECTOR &lt;selector&gt;(args)</tt> (there is no <tt>AS</tt>). - selector for JSON: <a class="externalLink" href="http://w3id.org/sparql-generate/sel/JSONPath_jayway">http://w3id.org/sparql-generate/sel/JSONPath_jayway</a> - SPARQL function for JSON: <a class="externalLink" href="http://w3id.org/sparql-generate/sel/JSONPath_jayway_string">http://w3id.org/sparql-generate/sel/JSONPath_jayway_string</a></p>
<h1>What is SPARQL-Generate ?</h1>
<p>SPARQL-Generate stands for SPARQL-Generate Protocol and RDF Generation Language. The aim of SPARQL-Generate <tt>GENERATE</tt> queries is to offer a simple template-based option to interpret any document as proper RDF, with a well defined semantics grounded on the SPARQL 1.1. </p>
<p>SPARQL-Generate is already in use for the following use cases: - Give ways to interpret JSON or even CBOR documents as RDF (ongoing work in the ITEA 2 SEAS project: serve the consumption data of the GECAD microgrid as CBOR, and point to the SPARQL-Generate <tt>GENERATE</tt> query that enables to interpret it as RDF. More generally, any kind of document, XML, JSON, CBOR, can be interpreted as RDF using the proper SPARQL-Generate <tt>GENERATE</tt> query with proper <i>selectors</i>)</p>

<ul>
  
<li>Generate a whole part of a vocabulary from a configuration file, and ensure that specific naming conventions are respected for resource URIs, labels and comments (ongoing work in the ITEA 2 SEAS project: the ontology of Faceted Spaces, that is used to describe multi-dimensional quantities, is parametrized and generated from a JSON configuration file);</li>
  
<li>generate RDF from several open data sources (ongoing work in the OpenSensingCity French ANR project)</li>
</ul></div>
<div class="section">
<h2><a name="A_RDF_Generation_Language"></a>A RDF Generation Language</h2>
<p>The RDF Generation Language part of SPARQL-Generate extends the SPARQL 1.1 Query language, and offers a simple template-based RDF Graph generation from RDF literals. </p>
<p>Other languages enable to describe mapping from documents to RDF. By design, SPARQL-Generate extends SPARQL and hence offers an alternative that presents the following advantages: - anyone familiar with SPARQL can easily learn SPARQL-Generate; - naive implementation over existing SPARQL engines is simple; - SPARQL-Generate leverages the expressivity of SPARQL 1.1: Aggregates, Solution Sequences and Modifiers, SPARQL functions and their extension mechanism.</p></div>
<div class="section">
<h2><a name="A_Protocol"></a>A Protocol</h2>
<p>The protocol part of SPARQL-Generate enables a web client or a web server to point to the URL of a SPARQL-Generate document that may be used to interpret the request (or the response) payload as RDF.</p>
<p>For HTTP requests, SPARQL-Generate defines Header Field <tt>X-SPARQL-Generate-Companion</tt>, that is an URL where one should be able to retrieve a SPARQL-Generate document</p>
<p>For HTTP responses, the server may use the web-link relation type defined by SPARQL-Generate, <a class="externalLink" href="http://w3id.org/sparql-generate/companion">http://w3id.org/sparql-generate/companion</a>, with the document as anchor, and the URL where one should be able to retrieve a SPARQL-Generate document as source.</p>
<p>The Internet Media type of a SPARQL-Generate query is <tt>application/sparql-generate</tt>, with file extension <tt>*.rqg</tt>.</p></div>
<div class="section">
<h2><a name="Description_of_the_SPARQL-Generate_Language"></a>Description of the SPARQL-Generate Language</h2>
<p>SPARQL-Generate <tt>GENERATE</tt> extends the SPARQL 1.1 recommendation with the following capabilities: - <tt>SELECTOR</tt> and <tt>SOURCE</tt> clauses, at the end of the query just before SPARQL 1.1 <tt>VALUES</tt> clause; - use <tt>GENERATE</tt> template in place of <tt>CONSTRUCT</tt> template in a triple pattern. The <tt>GENERATE</tt> template adds new capabilities to the <tt>CONSTRUCT</tt> template:  - <tt>LIST( ?x )</tt> is used in place of a RDF Term or variable. It generates a blank node common to all solutions of the query, and that blank node is also a RDF list that contains the RDF Terms bound to variable <tt>?x</tt> accross all of the solutions.  - sub-<tt>GENERATE</tt> use the current binding to execute a new <tt>GENERATE</tt> query.  - <tt>EXPR( expr )</tt> is used in place of a RDF Term or variable in a triple pattern. It is equivalent to a unused variable <tt>?x</tt>, that would be bound by a <tt>BIND</tt> clause at the end of the <tt>WHERE</tt> template.</p>
<div class="section">
<h3><a name="SELECTOR_and_SOURCE"></a><tt>SELECTOR</tt> and <tt>SOURCE</tt></h3>
<p><tt>SELECTOR</tt> or <tt>SOURCE</tt> clauses can be used in any order and any number just before the SPARQL 1.1 <tt>VALUES</tt> clause. At execution time, they are resolved just after the <tt>VALUES</tt> clause, in reverse order:</p>
<div class="section">
<h4><a name="SELECTOR"></a><tt>SELECTOR</tt></h4>
<p>The <tt>SELECTOR</tt> clause is used as follows: <tt>SELECTOR &lt;selector&gt;(args) AS ?var</tt>. </p>
<p><tt>&lt;selector&gt;</tt> is the IRI of a SPARQL-Generate <i>Selector</i>. A SPARQL-Generate <i>Selector</i> is similar to a SPARQL 1.1 Function, except it <i>returns a list of RDF Terms</i>.</p>
<p>Then for every RDF Term in the list, the rest of the query is executed with <tt>?var</tt> bound to the RDF Term ;</p>
<p><tt>?var</tt> may have already been bound. In such cases, the binding is <i>overriden</i>.</p></div>
<div class="section">
<h4><a name="SOURCE"></a><tt>SOURCE</tt></h4>
<p>The <tt>SOURCE</tt> clause is used as follows: <tt>SOURCE &lt;source&gt; ACCEPT &quot;mime&quot; AS ?var</tt>. </p>
<p>If <tt>&lt;source&gt;</tt> is bound to a IRI at that time, then the engine must operate a GET to that IRI, bound variable <tt>?var</tt> to the RDF Literal representation of the retrieved document in the <tt>?var</tt>, and continue the execution of the query. </p>
<p>The variable <tt>?var</tt> must not have been bound before. For now, only source IRIs with <tt>http</tt> scheme are considered. In the future, <tt>https</tt>, <tt>coap</tt>, and <tt>coaps</tt> schemes may be considered.</p>
<p><tt>ACCEPT &quot;mime&quot;</tt> is optional, and tells the engine which HTTP Accept Header Field it should use. mime MUST be a string literal, or IANA schemed URN (yet to be defined by IETF in a RFC), such that &#x201c;application/vcard+json&#x201d;.</p>
<p>The lexical form of the RDF Literal representation of the retrieved document is a Unicode representation of the payload. If this payload is encoded as text, then the lexical form is the Unicode representation of that text. Else, if the payload is encoded in a binary format, then the lexical form is the base64 representation of that binary document.</p>
<p>The datatype IRI of the RDF Literal representation of the retrieved document is a IANA schemed URN (yet to be defined by IETF in a RFC), defined based on the internet media type of the retrieved document. For instance, if the mime type is &#x201c;application/vcard+json&#x201d;. Then the datatype IRI will be <tt>&lt;urn:iana:mime:application:vcard+json&gt;</tt></p></div></div>
<div class="section">
<h3><a name="GENERATE"></a><tt>GENERATE</tt></h3>
<p>The <tt>GENERATE</tt> clause replaces the <tt>CONSTRUCT</tt> clause, and augments it with sub-<tt>GENERATE</tt> queries, and <tt>LIST</tt> and <tt>EXPR</tt> constructors.</p>
<div class="section">
<h4><a name="sub-GENERATE"></a>sub-<tt>GENERATE</tt></h4>
<p>A sub-<tt>GENERATE</tt> query generates more RDF based on the current binding solution.</p>
<p>It has the same syntax as a GENERATE query, except it MUST end with character <tt>.</tt>, and:</p>
<div class="section">
<h5><a name="URI_instead_of_the_Generate_pattern."></a>URI instead of the Generate pattern.</h5>
<p>Instead of <tt>GENERATE {...}</tt>, one may use <tt>GENERATE &lt;iri&gt;</tt>. In such cases, the engine must operate a GET at the given IRI, (only http scheme is considered for now) with Accept Header Field set to &#x201c;application/sparql-generate&#x201d;. If it retrieves a SPARQL-Generate query, then this query is executed with the current binding solution.</p></div>
<div class="section">
<h5><a name="USE_BINDINGS_clause"></a><tt>USE BINDINGS</tt> clause</h5>
<p>By default, the sub-<tt>GENERATE</tt> query is evaluated with the current binding solution as initial binding. In most use cases, it is sufficient to pass only part of the binding solution, and it is also necessary to rename the variables. For this purpose, the sub-<tt>GENERATE</tt> query may end with a <tt>WITH BINDINGS</tt> clause. </p>
<p>This clause is used as follows <tt>WITH BINDINGS ( ?currentvar1 AS ?newvar1 ) ... ( ?currentvarn AS ?newvarn )</tt>. </p>
<p>only variables <tt>?newvari</tt> are passed to the sub-<tt>GENERATE</tt> query, and they are bound to what variables <tt>?currentvari</tt> is bound. </p></div></div></div>
<div class="section">
<h3><a name="Grammar"></a>Grammar</h3>
<p>The EBNF extends the <a class="externalLink" href="https://www.w3.org/TR/sparql11-query/#sparqlGrammar">SPARQL 1.1 Grammar</a>.</p>

<div class="source">
<div class="source"><pre class="prettyprint">[174]	GenerateUnit	::=	Generate
[175]   Generate        ::= SPARQL 1.1 Prologue GenerateQuery
[175]	GenerateQuery   ::=	'GENERATE' GenerateTemplate GenerateWhereClause SPARQL 1.1 SolutionModifier SelectorClause
[177]	GenerateTemplate	::=	'{' SPARQL 1.1 ConstructTriples? ( SubGenerateQuery SPARQL 1.1 ConstructTriples? )* '}'
[178]	GenerateWhereClause	::=	'WHERE'? '{' GenerateGroupPattern '}'
[178]	SelectorClause	::=	( 'SELECTOR' SPARQL 1.1 FunctionCall )?
[179]   GenerateGroupPattern ::= '{' ( GenerateSubSelect | GeneratePattern ) '}'
[179]   GeneratePattern ::= GenerateGroupOrUnionPattern | GenerateOptionalPattern | GenerateMinusPattern | SPARQL 1.1 ServiceGraphPattern | SPARQL 1.1 Filter | SPARQL 1.1 Bind | SPARQL 1.1 InlineData
[ ]     GenerateGroupOrUnionPattern ::= GenerateGroupPattern ( 'UNION' GenerateGroupPattern )*
[ ]     GenerateOptionalPattern ::= 'OPTIONAL' GenerateGroupPattern
[ ]     GenerateMinusPattern ::= 'MINUS' GenerateGroupPattern
[181]	GenerateSubSelect	::=	SelectClause GenerateWhereClause SPARQL 1.1 SolutionModifier SelectorClause
[181]	SubGenerateQuery	::=	'GENERATE' ( SPARQL 1.1 SourceSelector | GenerateTemplate GenerateWhereClause ) SPARQL 1.1 SolutionModifier SelectorClause 
qsdfqsdf
</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="https://itea3.org/project/seas.html">ITEA 12004 SEAS Project</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
